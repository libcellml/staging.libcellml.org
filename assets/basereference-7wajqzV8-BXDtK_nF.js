import{aA as l,aC as g,aB as h}from"./index-Ch7Pi2nU.js";import{x as p}from"./methods-ClbyDlbW-CtPN1wXd.js";const{determinePageLocation:u,determinePageName:c,isInternalReference:m,isReferenceToCurrentPage:R,parentLevelsInRefURI:d}=p(),I=(r,o,a)=>{const n=l();return{onReferenceCreated:()=>{if(m(r)){let t=g(o),e=h(o);const s=r.getAttribute("refid");if(s&&!s.startsWith("#")?a.value.hash="#"+s:a.value.hash=s,!R(r)){t=c(r,o);let i=d(r);if(n.isOffsetReferenceURL(e)&&i){let f=e.split("/");for(;i--;)f.pop();f.length===1?e="/":e=f.join("/")}a.value.hash=u(r),n.hasPageById(e,t)||n.fetchPage({page_name:t,page_route:e,page_url:n.getBaseUrl(e)})}a.value.path=e==="/"?e+t:e+"/"+t}}}};export{I};
